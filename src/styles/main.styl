@import 'fonts.css'
@import 'normalizecss/normalize.css'

*, ::before, ::after
  box-sizing: inherit

html
  box-sizing: border-box

.deck
  counter-reset: slide
  font-family: 'PT Sans', sans-serif
  font-size: 25px
  line-height: 2
  color: rgb(0, 0, 0)
  background-color: rgb(0, 0, 0)
  //text-rendering: optimizeLegibility
  //font-feature-settings: "kern" 1
  //font-kerning: normal

  &:not(.bespoke-parent),
  section:not(.bespoke-slide)
    display: none

.bespoke-parent,
.bespoke-scale-parent
  position: absolute
  top: 0
  left: 0
  right: 0
  bottom: 0

.bespoke-parent
  // only put overflow on parent, not other slide wrapper elements
  overflow: hidden
  & > :not(.bespoke-slide)
    pointer-events: none

.bespoke-scale-parent
  // set width to 100vw to fix scrollbar calculation in Firefox
  width: 100vw

.bespoke-slide
  // force opacity to start at 0 to avoid transition on load when using bespoke-scale
  opacity: 0
  pointer-events: none
  background-color: #ffffff
  position: absolute
  top: 50%
  left: 50%
  width: 1024px
  margin-left: -(@width / 2)
  height: 640px
  margin-top: -(@height / 2)
  display: flex
  flex-direction: column
  justify-content: flex-start
  align-items: flex-start

.bespoke-active
  pointer-events: auto
  opacity: 1

.bespoke-bullet
  opacity: 0
  pointer-events: none
  &-active
    opacity: 1
    pointer-events: auto

// Slide types and styling

.bespoke-slide
  h2
    font-family: 'PT Sans Narrow', sans-serif
    font-size: 2em
    line-height: 1em
    color: rgb(102, 102, 102)
    margin: 0 0 37px 0
  p, ul, ol
    margin: 0 0 2em 0
  p, li, figcaption
    // reset line-height to match 2x font-size; not inheriting properly when using zoom-based scaling; must be em
    // ...or perhaps value is just shown wrong in the inspector
    line-height: 2em
    //text-rendering: optimizeLegibility
    //font-feature-settings: "kern" 1
    //font-kerning: normal
  p
    &.note
      color: rgb(153, 153, 153)
  blockquote
    margin: 0
    font-style: italic
    &::before
      position: absolute
      margin: -16px 0 0 -80px
      color: #ccc
      font-size: 8em
      line-height: 1
      content: '\201c'
      font-style: normal
  figure
    margin: 0
  figcaption
    margin: -2em 0 2em 0
    font-weight: bold
    font-style: italic
  ul, ol
    padding: 0
    list-style: none
    li
      text-indent: -2em
      &::before
        display: inline-block
        width: 2em
        color: rgb(187, 187, 187)
        text-align: right
  ol
    counter-reset: list
    & > li::before
      counter-increment: list
      content: counter(list) '.\00a0'
  ul
    & > li::before
      content: '\2022\00a0\00a0'
  ol ol,
  ol ul,
  ul ol,
  ul ul
    margin: 0 0 0 2em
  a
    color: #4b86c2
    text-decoration: none
    background: linear-gradient(to top, currentColor, currentColor .09em, transparent .09em, transparent) repeat-x
  h2 a
    background: linear-gradient(to top, currentColor, currentColor .11em, transparent .11em, transparent) repeat-x
  code
    font-family: 'PT Mono', monospace
  *:not(pre) > code, mark
    border-radius: 8px
    padding: 3px 8px
  *:not(pre) > code
    background-color: rgba(0, 0, 0, 0.07)
  mark
    background-color: #fafaa2
  pre
    margin: 0 0 2em 0
    counter-reset: code
    white-space: normal
    line-height: 2em
    code
      display: block
      white-space: pre
      line-height: 2em
      &::before
        position: absolute
        margin-left: -2em
        color: #bbb
        counter-increment: code
        content: counter(code,decimal-leading-zero) '.'
    mark.comment
      color: #999
      background-color: transparent
      padding: 0
    mark.important
      background-color: #c00
      color: white
  table
    margin: 0 0 2em 0
    width: 100%
    th
      text-align: left
    th, td
      background: linear-gradient(to top, #bbb, #bbb .055em, transparent .055em, transparent) repeat-x
      line-height: 2em
  .content
    padding: 105px 120px
    width: 100%
  &::after
    position: absolute
    top: 0
    right: 119px
    padding: 1em 0 0 0
    width: 2.5em
    height: 4em
    color: #fff
    counter-increment: slide
    content: counter(slide)
    text-align: center
    font-size: 0.8em
    background: url(../images/ribbon.svg) no-repeat
    box-sizing: content-box

  &.cover, &.shout
    &::after
      visibility: hidden

  &.cover
    display: block
    h2, p, a
      color: rgb(255, 255, 255)
  &.title
    h2, p, a
      text-align: center
    h2
      margin: 30px 0 0 0
      font-size: 2.8em
    p
      font-size: 0.8em
      line-height: 2em
      font-style: italic
      margin: 0.5em 0 0 0

  &.shout
    .content
      padding-top: 0
      padding-bottom: 0
    justify-content: center
    align-items: center
    h2
      font-size: 6em
      text-align: center

// Overview

.bespoke-overview
  background-color: #585a5e
  background-image: url(../images/linen-2x.png)
  background-size: 256px

  .bespoke-slide
    box-shadow: 0 0 120px rgba(0, 0, 0, 0.005), 0 80px 200px rgba(42, 43, 45, 0.6)

  .bespoke-slide:hover
    box-shadow: 0 0 0 40px rgba(42, 43, 45, 0.3), 0 80px 200px rgba(42, 43, 45, 0.6)
    border-radius: 4px

  .bespoke-active
    box-shadow: 0 0 0 4px #376da3, 0 0 0 40px #4B86C2, 0 80px 200px rgba(42, 43, 45, 0.6) !important
    outline: none
    border-radius: 4px

  // Don't show visible scrollbar in IE 10+ or WebKit
  -ms-overflow-style: none
  &::-webkit-scrollbar
    width: 0

.bespoke-overview-counter .bespoke-slide::after
  top: 100%
  left: 10%
  width: auto
  height: auto
  color: #3c3d40
  font-weight: bold
  text-shadow: 0 2px 2px #8d8e90
  font-size: 1.6em
  transform: scale(2)
  transform-origin: top left
  background: none
  cursor: default
  visibility: visible
  text-align: left
  counter-increment: slide
  content: counter(slide)

.bespoke-overview-counter .bespoke-active::after
  color: #4B86C2
  text-shadow: 0 2px 2px rgba(42, 43, 45, 0.6)

.bespoke-overview .bespoke-slide,
.bespoke-overview-to .bespoke-slide,
.bespoke-overview-from .bespoke-slide
  transition: none

.bespoke-title
  padding: 275px 300px 0
  h1
    font-family: 'PT Sans Narrow', sans-serif
    font-size: 6.5em
    line-height: 1em
    color: #3c3d40
    text-shadow: 0 0.02em 0.02em #8d8e90
    text-align: left
